<h1><%= title %></h1>
<%- messages() %>

<% if (errors) { %>
    <ul class="notice">
        <% errors.array().forEach(error=> { %>
            <li><%= error.msg %></li>
        <% }) %>
    </ul>
<% } %>
<div class="orders-container">
    <% if (orders && orders.length> 0) { %>
        <h2>Your Purchase History</h2>
        <% orders.forEach(function(order) { %>
            <div class="order-card">
                <div class="order-header">
                    <h3>Order #<%= order.order_id %>
                    </h3>
                    <span class="order-status status-<%= order.order_status.toLowerCase() %>">
                        <%= order.order_status %>
                    </span>
                </div>
                <div class="order-details">
                    <div class="vehicle-info">
                        <h4>
                            <%= order.inv_make %>
                                <%= order.inv_model %> (<%= order.inv_year %>)
                        </h4>
                        <p><strong>Price:</strong> $<%= new
                                Intl.NumberFormat('en-US').format(order.order_total) %>
                        </p>
                    </div>
                    <div class="delivery-info">
                        <p><strong>Delivery Address:</strong></p>
                        <p>
                            <%= order.delivery_address %>
                        </p>
                    </div>
                    <div class="order-date">
                        <p><strong>Order Date:</strong>
                            <%= new Date(order.order_date).toLocaleDateString() %>
                        </p>
                    </div>
                </div>
            </div>
        <% }) %>
    <% } else { %>
        <div class="no-orders">
            <h2>No Orders Yet</h2>
            <p>You haven't made any purchases yet.</p>
            <a href="/" class="btn">Browse Vehicles</a>
        </div>
    <% } %>
</div>